{
  "entities": {
    "StudySession": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "StudySession",
      "type": "object",
      "description": "Represents a study session, storing data about the session's duration, focus time, and AI analysis logs.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the StudySession entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who initiated the study session. (Relationship: User 1:N StudySession)"
        },
        "startTime": {
          "type": "string",
          "description": "The start time of the study session.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end time of the study session. Can be null if the session is still active.",
          "format": "date-time"
        },
        "totalFocusTime": {
          "type": "number",
          "description": "The total focus time in seconds during the study session."
        },
        "logs": {
          "type": "array",
          "description": "An array of AI analysis logs, each containing a timestamp, category, and reasoning.",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "timestamp": {
                "type": "number"
              },
              "category": {
                "type": "string",
                "enum": [
                  "Coding",
                  "Mathematics",
                  "Academic Research",
                  "Distraction",
                  "Away"
                ]
              },
              "reasoning": {
                "type": "string"
              },
              "duration": {
                "type": "number"
              }
            },
            "required": [
              "id",
              "timestamp",
              "category",
              "reasoning",
              "duration"
            ]
          }
        }
      },
      "required": [
        "userId",
        "startTime",
        "totalFocusTime",
        "logs"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the FocusMentor AI application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        }
      },
      "required": [
        "id"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/backend/entities/User"
      },
      "description": "Stores user profile data. Secure via path-based ownership, ensuring only the user can access their data."
    },
    "/users/{userId}/study_sessions/{studySessionId}": {
      "schema": {
        "$ref": "#/backend/entities/StudySession"
      },
      "description": "Stores study session data for a user. Includes denormalized 'userId' for authorization independence."
    }
  }
}
